{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/messages.js","../src/js/render-functions.js","../src/js/spinner.js","../src/main.js"],"sourcesContent":["const API_KEY = '49648507-d50f841642650241279dda9b6';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 9;\n\nexport function processSearchResults(query, { onStart, onSuccess, onError, onFinally }) {\n  onStart();\n  fetch(getFullUrl(query))\n    .then(res => {\n      if (!res.ok) {\n        throw new Error();\n      }\n      return res.json();\n    })\n    .then(data => onSuccess(data.hits))\n    .catch(err => onError())\n    .finally(() => onFinally());\n}\n\nfunction getFullUrl(query) {\n  return `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&per_page=${PER_PAGE}`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst MESSAGES = {\n  not_found: 'Sorry, no images matching search query',\n  no_query: 'Please, enter your search query',\n  failed: 'Sorry, images failed to fetch',\n}\n\nexport function showMessage(message) {\n  iziToast.error({\n    message: MESSAGES[message]\n  });\n}","import { showMessage } from './messages.js';\n\nconst gallery = document.querySelector('.gallery');\nconst detailTitles = ['Likes', 'Views', 'Comments', 'Downloads'];\n\nexport function renderGallery(images) {\n  clearGallery();\n\n  if (images.length === 0) {\n    showMessage('not_found');\n    return;\n  }\n\n  images.forEach((image) => {\n    gallery.append(getImageCart(image));\n  });\n  showGallery();\n}\n\nexport function showGallery() {\n  gallery.style.display = 'grid';\n}\n\nexport function hideGallery() {\n  gallery.style.display = 'none';\n}\n\nfunction clearGallery() {\n  while (gallery.lastElementChild) {\n    gallery.removeChild(gallery.lastElementChild);\n  }\n}\n\nfunction getImageCart(imgData) {\n  const { webformatURL, largeImageURL, tags } = imgData;\n\n  const cart = document.createElement('li');\n  cart.classList.add('gallery-cart');\n\n  const link = document.createElement('a');\n  link.classList.add('gallery-link');\n  link.href = largeImageURL;\n\n  const img = document.createElement('img');\n  img.classList.add('gallery-image');\n  img.src = webformatURL;\n  img.title = tags;\n\n  const details = document.createElement('div');\n  details.classList.add('gallery-details');\n  detailTitles.forEach((value) => {\n    const detail = document.createElement('div');\n    detail.classList.add('detail');\n\n    const title = document.createElement('p');\n    title.classList.add('detail-title');\n\n    const desc = document.createElement('p');\n    desc.classList.add('detail-desc');\n\n    title.innerText = value;\n    desc.innerText = imgData[value.toLowerCase()];\n\n    detail.append(title);\n    detail.append(desc);\n    details.append(detail);\n  });\n\n  link.append(img);\n  link.append(details);\n  cart.append(link);\n\n  return cart;\n}\n","const spinner = document.querySelector('.loader-wrapper');\n\nexport function showSpinner() {\n  spinner.style.display = 'flex';\n}\n\nexport function hideSpinner() {\n  spinner.style.display = 'none';\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { processSearchResults } from './js/pixabay-api.js';\nimport { renderGallery, hideGallery } from './js/render-functions.js';\nimport { showSpinner, hideSpinner } from './js/spinner.js';\nimport { showMessage } from './js/messages.js';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery-link');\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  const searchQuery = new FormData(form).get('query');\n  if (!searchQuery) {\n    showMessage('no_query');\n    return;\n  }\n\n  processSearchResults(searchQuery, {\n    onStart: () => {\n      hideGallery();\n      showSpinner();\n    },\n    onSuccess: (images) => {\n      renderGallery(images);\n      lightbox.refresh();\n    },\n    onError: () => showMessage('failed'),\n    onFinally: hideSpinner\n  });\n});\n\ngallery.addEventListener('click', () => {\n  lightbox.open();\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","processSearchResults","query","onStart","onSuccess","onError","onFinally","getFullUrl","res","data","err","MESSAGES","showMessage","message","iziToast","gallery","detailTitles","renderGallery","images","clearGallery","image","getImageCart","showGallery","hideGallery","imgData","webformatURL","largeImageURL","tags","cart","link","img","details","value","detail","title","desc","spinner","showSpinner","hideSpinner","form","lightbox","SimpleLightbox","e","searchQuery"],"mappings":"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"}